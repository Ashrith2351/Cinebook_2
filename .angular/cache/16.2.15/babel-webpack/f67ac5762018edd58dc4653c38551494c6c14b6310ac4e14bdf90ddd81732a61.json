{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common\";\nfunction BookTicketsComponent_button_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function BookTicketsComponent_button_4_Template_button_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const time_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.selectShowtime(time_r2));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const time_r2 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", time_r2, \" \");\n  }\n}\nfunction BookTicketsComponent_div_8_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function BookTicketsComponent_div_8_button_1_Template_button_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const seat_r7 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.selectSeat(seat_r7));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const seat_r7 = ctx.$implicit;\n    i0.ɵɵproperty(\"disabled\", seat_r7.booked);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", seat_r7.number, \" \");\n  }\n}\nfunction BookTicketsComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, BookTicketsComponent_div_8_button_1_Template, 2, 2, \"button\", 7);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const row_r5 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", row_r5);\n  }\n}\nexport class BookTicketsComponent {\n  constructor(router) {\n    this.router = router;\n    this.showtimes = ['9AM', '12PM', '6PM', '9PM'];\n    this.seatMap = [[{\n      number: 'A1',\n      booked: false\n    }, {\n      number: 'A2',\n      booked: false\n    }, {\n      number: 'A3',\n      booked: true\n    }, {\n      number: 'A4',\n      booked: false\n    }], [{\n      number: 'B1',\n      booked: false\n    }, {\n      number: 'B2',\n      booked: false\n    }, {\n      number: 'B3',\n      booked: false\n    }, {\n      number: 'B4',\n      booked: true\n    }]\n    // Add more rows\n    ];\n\n    this.selectedShowtime = null;\n    this.selectedSeats = [];\n  }\n  ngOnInit() {\n    this.movie = history.state.movie; // Get the selected movie from the state\n  }\n\n  selectShowtime(time) {\n    this.selectedShowtime = time;\n  }\n  selectSeat(seat) {\n    if (!seat.booked) {\n      this.selectedSeats.push(seat);\n      seat.booked = true;\n    }\n  }\n  confirmBooking() {\n    if (!this.isUserLoggedIn()) {\n      // Redirect to login, passing the return URL as a query parameter\n      this.router.navigate(['/login'], {\n        queryParams: {\n          returnUrl: this.router.url\n        }\n      });\n    } else {\n      // Proceed with booking confirmation\n      alert(`Booking confirmed! Showtime: ${this.selectedShowtime}, Seats: ${this.selectedSeats.map(s => s.number).join(', ')}`);\n    }\n  }\n  isUserLoggedIn() {\n    // Check if the user is logged in (you can change this logic with actual auth check)\n    return !!localStorage.getItem('userToken'); // Assuming you store a token in local storage after login\n  }\n  static #_ = this.ɵfac = function BookTicketsComponent_Factory(t) {\n    return new (t || BookTicketsComponent)(i0.ɵɵdirectiveInject(i1.Router));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: BookTicketsComponent,\n    selectors: [[\"app-book-tickets\"]],\n    decls: 11,\n    vars: 3,\n    consts: [[1, \"booking-container\"], [1, \"showtime-selection\"], [3, \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"seat-map\"], [4, \"ngFor\", \"ngForOf\"], [1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [3, \"click\"], [3, \"disabled\", \"click\", 4, \"ngFor\", \"ngForOf\"], [3, \"disabled\", \"click\"]],\n    template: function BookTicketsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n        i0.ɵɵtext(2, \"Select Showtime\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 1);\n        i0.ɵɵtemplate(4, BookTicketsComponent_button_4_Template, 2, 1, \"button\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"h2\");\n        i0.ɵɵtext(6, \"Select Seats\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"div\", 3);\n        i0.ɵɵtemplate(8, BookTicketsComponent_div_8_Template, 2, 1, \"div\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"button\", 5);\n        i0.ɵɵlistener(\"click\", function BookTicketsComponent_Template_button_click_9_listener() {\n          return ctx.confirmBooking();\n        });\n        i0.ɵɵtext(10, \" Confirm Booking \");\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.showtimes);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.seatMap);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"disabled\", !ctx.selectedShowtime || !ctx.selectedSeats.length);\n      }\n    },\n    dependencies: [i2.NgForOf],\n    styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵlistener","BookTicketsComponent_button_4_Template_button_click_0_listener","restoredCtx","ɵɵrestoreView","_r4","time_r2","$implicit","ctx_r3","ɵɵnextContext","ɵɵresetView","selectShowtime","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","BookTicketsComponent_div_8_button_1_Template_button_click_0_listener","_r9","seat_r7","ctx_r8","selectSeat","ɵɵproperty","booked","number","ɵɵtemplate","BookTicketsComponent_div_8_button_1_Template","row_r5","BookTicketsComponent","constructor","router","showtimes","seatMap","selectedShowtime","selectedSeats","ngOnInit","movie","history","state","time","seat","push","confirmBooking","isUserLoggedIn","navigate","queryParams","returnUrl","url","alert","map","s","join","localStorage","getItem","_","ɵɵdirectiveInject","i1","Router","_2","selectors","decls","vars","consts","template","BookTicketsComponent_Template","rf","ctx","BookTicketsComponent_button_4_Template","BookTicketsComponent_div_8_Template","BookTicketsComponent_Template_button_click_9_listener","length"],"sources":["D:\\MS\\SWE-632\\cinebook\\cinebook_app\\src\\app\\book-tickets\\book-tickets.component.ts","D:\\MS\\SWE-632\\cinebook\\cinebook_app\\src\\app\\book-tickets\\book-tickets.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-book-tickets',\n  templateUrl: './book-tickets.component.html',\n  styleUrls: ['./book-tickets.component.css']\n})\nexport class BookTicketsComponent implements OnInit {\n  showtimes = ['9AM', '12PM', '6PM', '9PM'];\n  seatMap = [\n    [{ number: 'A1', booked: false }, { number: 'A2', booked: false }, { number: 'A3', booked: true }, { number: 'A4', booked: false }],\n    [{ number: 'B1', booked: false }, { number: 'B2', booked: false }, { number: 'B3', booked: false }, { number: 'B4', booked: true }],\n    // Add more rows\n  ];\n  selectedShowtime: string | null = null;\n  selectedSeats: any[] = [];\n  movie: any;\n\n  constructor(private router: Router) {}\n\n  ngOnInit(): void {\n    this.movie = history.state.movie; // Get the selected movie from the state\n  }\n\n  selectShowtime(time: string) {\n    this.selectedShowtime = time;\n  }\n\n  selectSeat(seat: any) {\n    if (!seat.booked) {\n      this.selectedSeats.push(seat);\n      seat.booked = true;\n    }\n  }\n\n  confirmBooking() {\n    if (!this.isUserLoggedIn()) {\n      // Redirect to login, passing the return URL as a query parameter\n      this.router.navigate(['/login'], { queryParams: { returnUrl: this.router.url } });\n    } else {\n      // Proceed with booking confirmation\n      alert(`Booking confirmed! Showtime: ${this.selectedShowtime}, Seats: ${this.selectedSeats.map(s => s.number).join(', ')}`);\n    }\n  }\n\n  isUserLoggedIn(): boolean {\n    // Check if the user is logged in (you can change this logic with actual auth check)\n    return !!localStorage.getItem('userToken'); // Assuming you store a token in local storage after login\n  }\n}\n","<div class=\"booking-container\">\n    <h2>Select Showtime</h2>\n    <div class=\"showtime-selection\">\n      <button *ngFor=\"let time of showtimes\" (click)=\"selectShowtime(time)\">\n        {{ time }}\n      </button>\n    </div>\n  \n    <h2>Select Seats</h2>\n    <div class=\"seat-map\">\n      <div *ngFor=\"let row of seatMap\">\n        <button *ngFor=\"let seat of row\" [disabled]=\"seat.booked\" (click)=\"selectSeat(seat)\">\n          {{ seat.number }}\n        </button>\n      </div>\n    </div>\n  \n    <button (click)=\"confirmBooking()\" class=\"btn btn-primary\" [disabled]=\"!selectedShowtime || !selectedSeats.length\">\n      Confirm Booking\n    </button>\n  </div>\n  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}