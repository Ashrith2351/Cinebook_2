{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common\";\nconst _c0 = function (a0, a1, a2) {\n  return {\n    \"available\": a0,\n    \"selected\": a1,\n    \"sold\": a2\n  };\n};\nfunction SeatSelectionComponent_div_10_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵlistener(\"click\", function SeatSelectionComponent_div_10_div_1_Template_div_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const seatIndex_r7 = restoredCtx.index;\n      const rowIndex_r4 = i0.ɵɵnextContext().index;\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.toggleSeat(rowIndex_r4, seatIndex_r7));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const seat_r6 = ctx.$implicit;\n    const seatIndex_r7 = ctx.index;\n    const rowIndex_r4 = i0.ɵɵnextContext().index;\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction3(2, _c0, !seat_r6.booked, ctx_r5.isSelectedSeat(rowIndex_r4, seatIndex_r7), seat_r6.booked));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", seat_r6.label, \" \");\n  }\n}\nfunction SeatSelectionComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵtemplate(1, SeatSelectionComponent_div_10_div_1_Template, 2, 6, \"div\", 15);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const row_r3 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", row_r3);\n  }\n}\nfunction SeatSelectionComponent_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r1.confirmationMessage);\n  }\n}\nfunction SeatSelectionComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 18)(1, \"div\", 19)(2, \"p\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function SeatSelectionComponent_div_24_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.closeModal());\n    });\n    i0.ɵɵtext(5, \"OK\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r2.confirmationMessage);\n  }\n}\nexport let SeatSelectionComponent = /*#__PURE__*/(() => {\n  class SeatSelectionComponent {\n    constructor(router, route, location) {\n      this.router = router;\n      this.route = route;\n      this.location = location;\n      this.seatMap = [];\n      this.selectedSeats = [];\n      this.confirmationMessage = ''; // Add this line\n      this.showModal = false;\n      this.initializeNavigationState();\n      this.seatMap = this.generateSeatMap(10, 20); // Example: 10 rows, 20 seats per row\n    }\n\n    ngOnInit() {}\n    initializeNavigationState() {\n      const navigation = this.router.getCurrentNavigation();\n      if (navigation && navigation.extras && navigation.extras.state) {\n        const state = navigation.extras.state;\n        this.movie = state.movie;\n        this.cinema = state.cinema;\n        this.date = state.date;\n        this.showtime = state.showtime;\n      }\n    }\n    generateSeatMap(rows, cols) {\n      let map = [];\n      for (let i = 0; i < rows; i++) {\n        let row = [];\n        for (let j = 0; j < cols; j++) {\n          row.push({\n            booked: Math.random() < 0.2,\n            label: String.fromCharCode(65 + i) + (j + 1)\n          });\n        }\n        map.push(row);\n      }\n      return map;\n    }\n    toggleSeat(rowIndex, seatIndex) {\n      if (this.seatMap[rowIndex][seatIndex].booked) return;\n      let seatFound = this.selectedSeats.find(s => s.row === rowIndex && s.col === seatIndex);\n      if (seatFound) {\n        this.selectedSeats = this.selectedSeats.filter(s => s !== seatFound);\n      } else {\n        this.selectedSeats.push({\n          row: rowIndex,\n          col: seatIndex\n        });\n      }\n    }\n    isSelectedSeat(rowIndex, seatIndex) {\n      return !!this.selectedSeats.find(s => s.row === rowIndex && s.col === seatIndex);\n    }\n    confirmSelection() {\n      const selectedLabels = this.selectedSeats.map(s => this.seatMap[s.row][s.col].label);\n      this.confirmationMessage = 'You have booked the following seats: ' + selectedLabels.join(', ');\n      this.showModal = true; // Show the modal with the confirmation message\n    }\n\n    closeModal() {\n      this.showModal = false; // Hide the modal\n    }\n\n    goBack() {\n      this.location.back();\n    }\n    static #_ = this.ɵfac = function SeatSelectionComponent_Factory(t) {\n      return new (t || SeatSelectionComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Location));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: SeatSelectionComponent,\n      selectors: [[\"app-seat-selection\"]],\n      decls: 25,\n      vars: 11,\n      consts: [[1, \"back-button\", 3, \"click\"], [1, \"seat-selection-container\"], [1, \"theater-info\"], [1, \"seat-map-container\"], [\"class\", \"seat-row\", 4, \"ngFor\", \"ngForOf\"], [1, \"screen\"], [1, \"color-indication-bar\"], [1, \"color-box\", \"available\"], [1, \"color-box\", \"selected\"], [1, \"color-box\", \"sold\"], [1, \"controls\"], [3, \"disabled\", \"click\"], [\"class\", \"confirmation-message\", 4, \"ngIf\"], [\"class\", \"modal\", 4, \"ngIf\"], [1, \"seat-row\"], [\"class\", \"seat\", 3, \"ngClass\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"seat\", 3, \"ngClass\", \"click\"], [1, \"confirmation-message\"], [1, \"modal\"], [1, \"modal-content\"], [3, \"click\"]],\n      template: function SeatSelectionComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"button\", 0);\n          i0.ɵɵlistener(\"click\", function SeatSelectionComponent_Template_button_click_0_listener() {\n            return ctx.goBack();\n          });\n          i0.ɵɵtext(1, \"Back\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(2, \"div\", 1)(3, \"h1\");\n          i0.ɵɵtext(4);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"div\", 2)(6, \"span\");\n          i0.ɵɵtext(7);\n          i0.ɵɵpipe(8, \"date\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(9, \"div\", 3);\n          i0.ɵɵtemplate(10, SeatSelectionComponent_div_10_Template, 2, 1, \"div\", 4);\n          i0.ɵɵelementStart(11, \"div\", 5);\n          i0.ɵɵtext(12, \"All eyes this way please!\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(13, \"div\", 6)(14, \"div\", 7);\n          i0.ɵɵtext(15, \"Available\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(16, \"div\", 8);\n          i0.ɵɵtext(17, \"Selected\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"div\", 9);\n          i0.ɵɵtext(19, \"Sold\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(20, \"div\", 10)(21, \"button\", 11);\n          i0.ɵɵlistener(\"click\", function SeatSelectionComponent_Template_button_click_21_listener() {\n            return ctx.confirmSelection();\n          });\n          i0.ɵɵtext(22, \"Confirm Selection\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(23, SeatSelectionComponent_div_23_Template, 2, 1, \"div\", 12);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(24, SeatSelectionComponent_div_24_Template, 6, 1, \"div\", 13);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(4);\n          i0.ɵɵtextInterpolate(ctx.movie.title);\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate3(\"\", ctx.cinema.name, \" | \", i0.ɵɵpipeBind2(8, 8, ctx.date, \"fullDate\"), \" | \", ctx.showtime, \"\");\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngForOf\", ctx.seatMap);\n          i0.ɵɵadvance(11);\n          i0.ɵɵproperty(\"disabled\", ctx.selectedSeats.length === 0);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.confirmationMessage);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.showModal);\n        }\n      },\n      dependencies: [i2.NgClass, i2.NgForOf, i2.NgIf, i2.DatePipe],\n      styles: [\".seat-selection-container[_ngcontent-%COMP%]{text-align:center}.theater-info[_ngcontent-%COMP%], .category[_ngcontent-%COMP%]{margin-bottom:20px}.seat-map-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.seat-row[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:5px}.seat[_ngcontent-%COMP%]{width:35px;height:35px;line-height:35px;margin:2px;background-color:#ccc;cursor:pointer;-webkit-user-select:none;user-select:none}.available[_ngcontent-%COMP%]:hover{background-color:#8f8}.selected[_ngcontent-%COMP%]{background-color:#4f4}.sold[_ngcontent-%COMP%]{background-color:#f44;cursor:not-allowed}.screen[_ngcontent-%COMP%]{text-align:center;padding:10px;background-color:#a8a5a5;color:#fff;margin-top:20px;font-size:20px}.color-box[_ngcontent-%COMP%]{width:100px;padding:5px;text-align:center;color:#fff;margin:0 10px}.color-box.available[_ngcontent-%COMP%]{background-color:#ccc}.color-box.selected[_ngcontent-%COMP%]{background-color:#4f4}.color-box.sold[_ngcontent-%COMP%]{background-color:#f44}.controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;margin-top:20px;margin-bottom:60px;background-color:#007bff;color:#fff;border:none;border-radius:5px;font-size:16px;cursor:pointer;transition:background-color .3s ease}.controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;color:#666;cursor:not-allowed}.back-button[_ngcontent-%COMP%]{padding:10px 20px;margin-top:10px;background-color:#007bff;color:#fff;border:none;border-radius:5px;font-size:16px;cursor:pointer;transition:background-color .3s ease}.back-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.color-indication-bar[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;width:100%;display:flex;justify-content:center;padding:10px;background-color:#fff;box-shadow:0 -2px 5px #0000001a}.confirmation-message[_ngcontent-%COMP%]{padding:10px;background-color:#f0f0f0;border-left:4px solid #4CAF50;margin-top:10px;font-size:16px}.modal[_ngcontent-%COMP%]{position:fixed;left:0;top:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:5px;box-shadow:0 4px 6px #0000001a;width:300px;text-align:center}.modal-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:0;margin-bottom:20px;font-size:16px}.modal-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#6a1b9a;color:#fff;border:none;border-radius:20px;padding:10px 20px;text-transform:uppercase;font-weight:700;cursor:pointer;transition:background-color .3s ease}.modal-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#9c27b0}\"]\n    });\n  }\n  return SeatSelectionComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}